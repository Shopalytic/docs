<h2 id="account_register">account_register</h2>
Called directly after a customer registers for a new account

<pre>Required Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---
`email` | the email address of the customer. Email address must be unique. If another customer is registered with the same email address the event will be ignored. | string | example@gmail.com
`first_name` | the first name of the customer | string | Mike
`last_name` | the last name of the customer | string | Smith

<pre>Optional Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---
`join_date` | date and time the customer registered for the account. If no join_date is provided we will default to the current date and time. The timestamp should be the number of seconds after the UTC Unix epoch. | timestamp | 1365698517


<h2 id="account_update">account_update</h2>
Update the properties of a customer. Only the fields specified will be updated.

<pre>Optional Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---
`email` | the updated email address of the customer. If another customer is registered with the same email address the entire update event will be ignored. | string | example123@gmail.com
`first_name` | the updated first name of the customer | string | John
`last_name` | the updated last name of the customer | string | Doe


<h2 id="cart_add">cart_add</h2>
Called after a customer adds an item to their shopping cart 

<pre>Required Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---
`cart_id` | id that uniquely identifies the shopping cart. In most cases this will be a cart or order id generated by your commerce platform | string | 123456
`sku` | the sku that identifies the product being added | string | tshirt-red
`price` | the cost of the product. This should be the price of a single quantity of the product and not the price multiplied by the quantity. Currency markings should be excluded. | decimal | 20.99
`qty` | the quantity of the sku added to the cart | int | 3

<pre>Optional Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---   
`modified_date` | the date and time the product was added to the cart. The timestamp should be the number of seconds after the UTC Unix epoch. If a `modified_date` is not supplied we will default to the time the event was called. | timestamp | 1365698517


<h2 id="cart_modify">cart_modify</h2>
Called when an item in the cart has been modified or deleted

<pre>Required Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---
`cart_id` | id that uniquely identifies the shopping cart | string | 123456
`sku` | the sku that identifies the product being modified | string | tshirt-red
`qty` | the new quantity. If the original quantity was "5" and the updated quantity was set to "7", `qty` would be set to "7". Set the quantity to "0" if the item has been removed from the cart. | int | 7
`price` | the new price. Only needs to be set if the price of the sku has changed since it was originally added. | decimal | 9.99

<pre>Optional Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---
`modified_date` | the date and time the cart item was modified. The timestamp should be the number of seconds after the UTC Unix epoch. If a `modified_date` is not supplied we will default to the time the event was called. | timestamp | 1365698517


<h2 id="order">order</h2>
Called after a customer successfully places an order

<pre>Required Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---      
`order_id` | unique id used to identify the order. This is usually a cart or order id generated by your commerce platform. | string | 123456
`cart_id` | id used to identify the shopping cart (see [cart_add](#cart_add). If you are importing records or not using the [cart_add](#cart_add) functionality you can set the `cart_id` to the same value as `order_id`. | string | 6789
`total` | the total cost of the order including any tax, shipping and less any discounts | decimal | 97.16
`subtotal` | the combined cost of all the products in the order. Excludes shipping, tax, and discounts | decimal | 88.96
`line_items` | array of dictionaries that describe the products being purchased | array of dict
 | <pre>Required Parameters</pre>
 | `sku`: code that uniquely identifies the product | string | hat-yellow
 | `price`: the cost of a single quantity of the product | decimal | 9.99
 | `qty`: the quantity of the product being ordered | int | 3
 | <pre>Optional Parameters</pre>
 | `cost`: the businesses cost to sell a single quantity of this product | decimal | 6.5

<pre>Optional Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---    
`order_date` | date and time the order was placed. The timestamp should be the number of seconds after the UTC Unix epoch. If no `order_date` is specified we will default to the time `order` was called. | timestamp | 1365698517
`billing` | dictionary with details about the billing location | dictionary
 | <pre>Required Parameters</pre>
 | `city`: of the person being billed | string | New York
 | `zipcode`: of the person being billed. For US zipcodes use the 5 digit code. | string | 10016
 | `country`: of the person being billed. Use the 3 letter country code. | string | USA
 | <pre>Optional Parameters</pre>
 | `state`: of the person being billed. Not required for US addresses. | string | New York
`shipping` | dictionary with details about the shipping location | dictionary
 | <pre>Required Parameters</pre>
 | `city`: of where the order is shipping to | string | New York
 | `zipcode`: of where the order is shipping to. For US zipcodes use the 5 digit code. | string | 10016
 | `country`: of where the order is shipping to. Use the 3 letter country code. | string | USA
 | <pre>Optional Parameters</pre>
 | `state`: of where the order is shipping to. Not required for US addresses. | string | New York      
`total_tax` | the cost of tax for the order | decimal | 3.87
`total_shipping` | the cost of shipping the order | decimal | 9.99
`payment_type` | the method used to pay for the order. This field is free form and can take any payment method you specify. A few examples are: visa, amex, paypal, google checkout or, site credit. You could also take a more generic approach and use credit card, cash, or check. The more specific the better analysis we can provide. | string |visa
`discounts` | array of dictionaries listing any discounts applied to the order. In the case where there are dynamic coupon codes that can only be used once, we suggest setting the `code` to the name of the group of coupons. `total_discount` must be set when using `discounts`. | array of dict
`total_discount` | the sum of all the discounts applied to the order. Must be set in conjunction with `discounts`. | decimal | 12.50
 | <pre>Required Parameters</pre>
 | `code`: the code that identifies the coupon | string | FREE-SHIPPING
 | `value`: the value this code has on the order. For example if an order was $50 and the discount code took 10% off the subtotal, then `value` would be 5. | decimal | 5



 <h2 id="refund">refund</h2>
Called when an order is partially or fully refunded. If the order is being fully refunded the only required fields are `order_id` and setting `refund_type = 'full'`.

<pre>Required Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---  
`order_id` | the order id to refund | string | 123456
`refund_type` | whether the refund is a `partial` or `full` refund. The only required fields when doing a full refund is `order_id`. | full or partial | full
`total_refund` | the total amount being refunded, including the refunded amounts for subtotal, tax, shipping and discounts. | decimal | 59.04
`subtotal_refund` | the sum of the line items being refunded. The subtotal should exclude tax, shipping, and discounts. If there are no line items being returned the `subtotal_refund` should be set to 0. | decimal | 20.99
`line_items` | the product being returned | array of dict
 | <pre>Required Parameters</pre>
 | `sku`: the sku of the product being returned | string | tshirt-red
 | `price`: the price being returned for a single quantity of the product | decimal | 9.99
 | `qty`: the quantity of this product being returned | int | 3

<pre>Optional Parameters</pre>
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---  
`tax_refund` | the amount of tax being refunded | decimal | 5.46
`shipping_refund` | the amount of shipping being refunded | decimal | 9.99
`discount_refund` | the amount of discount being refunded | decimal | 15.50



<h2 id="shipment">shipment</h2>
Called once shipping and tracking details for an order become available. If the order is broken up into multiple shipments you will need to call `shipment` once for each shipment. If you use one of our supported [Shipping Carrier Codes](#carriers) we will automatically populate the shipment sent and delivery times (you wont need to call `shipment_update` or set the `date_shipped` / `date_delivered`). 


<pre>Required Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---  
`order_id` | the order id of the shipment | string | 123456
`shipment_id` | the internal shipment id your commerce platform assigned to the shipment. The `shipment_id` must be a unique id that no other order has previously used. If your commerce platform doesn't generate a shipment id automatically, you can use the order id as a replacement for a shipment id. If your order ships in multiple shipments, we suggest incrementing a counter for each shipment. For example the first shipment could be [order_id]_1 and the second [order_id]_2. | string | 12345_1
`carrier` | the carrier code from the [Shipping Carrier Codes](#carriers) table. If you want to use a carrier that we don't support, you should specify *custom* as your carrier code. | carrier | fedex

<pre>Optional Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---  
`tracking_number` | the tracking number assigned by the shipping carrier | string | 1Z 999 AA1 01 2345 6784
`date_shipped` | the date the order shipped. If you're using a non customer carrier code then you should omit this field. The timestamp should be the number of seconds after the UTC Unix epoch. | timestamp | 1365698517
`date_delivered` | the date the shipment was delivered. If you're using a non custom carrier code then you should omit this field. The timestamp should be the number of seconds after the UTC Unix epoch. | timestamp | 1365698517

{% capture shipping %}

*Name* | *code* | *name* | *code*
--- | --- | --- | ---
Aramex | aramex | Argentina OCA E-Pak | oca-ar
Australia Post | australia-post | Brazil Correios | brazil-correios
Canada Post | canada-post | China EMS | china-ems
Correos de España | spain-correos-es | DHL Germany | dhl-germany
DHL Global Mail | dhl-global-mail | DHL Netherlands | dhl-nl
DHL Poland | dhl-poland | DHL | dhl
DPD | dpd | Danmark Post | danmark-post
Fedex UK | fedex-uk | Fedex | fedex
Flash Courier | flash-courier | Hong Kong Post | hong-kong-post
India Post | india-post | International Seur | international-seur
Israel Post | israel-post | Korea Post | korea-post
La Poste Colissimo | la-poste-colissimo | Malaysia Post | malaysia-post
OPEK | opek | OnTrac | ontrac
Parcel Force | parcel-force | Portugal CTT | portugal-ctt
Portugal Seur | portugal-seur | Purolator | purolator
Royal Mail | royal-mail | Russian Post | russian-post
S.F. Express | sf-express | Saudi Post | saudi-post
Singapore Post | singapore-post | Singapore Speedpost | singapore-speedpost
Siodemka | siodemka | Spanish Seur | spanish-seur
Star Track Australia | star-track | Swiss Post | swiss-post
TAQBIN Hong Kong | taqbin-hk | TAQBIN Singapore | taqbin-sg
TNT | tnt | Thailand Thai Post | thailand-post
UPS | ups | USPS | usps
    
{% endcapture %}

<pre id="carriers">Shipping Carrier Codes</pre> 
<div class="carriers" style="width: 150px; display: inline">
{{ shipping | markdownify }}
</div>

<br />
Shipping data powered by [![Aftership](/assets/images/aftership_logo.png)](http://www.aftership.com)


<h2 id="shipment_update">shipment_update</h2>
Called to update a shipments shipping or delivery time. If you're using a carrier code that has automated date population (see: [Shipping Carrier Codes](#carriers)) then you don't need to call `shipment_update`.

<pre>Required Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---    
`order_id` | the order if of the shipment | string | 12345
`shipment_id` | the shipment id | string | 12345_1
`date_shipped` | the date the shipment was sent. The timestamp should be the number of seconds after the UTC Unix epoch. | timestamp | 1365698517
`date_delivered` | the date the shipment was delivered. The timestamp should be the number of seconds after the UTC Unix epoch. | timestamp | 1365698517


<h2 id="product_view">product_view</h2>
Called anytime a customer views a product page.

<pre>Required Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---         
`sku` | the unique code that identifies the product | string | tshirt-red
`name` | the name of the product | string | This is a red shirt
`price` | the price of the product | decimal | 29.99

<pre>Optional Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---         
`categories` | an array of product categories | array | ['shirts', 'apparel']
`logged_in` | whether the customer is logged in or not | bool | true


<h2 id="page_view">page_view</h2>
Called on each page view.

<pre>Required Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---         
`url` | the URL of the page being requested. Send the raw URL as you received it, you shouldn't strip anything out. | string | http://www.example.com/product/x.html
`referrer` | the URL the page was referrer by | string | http://www.google.com

<pre>Optional Parameters</pre> 
*Parameter* | *Description* | *Type* | *Example*
--- | --- | --- | ---         
`logged_in` | whether the customer is logged in or not | bool | true
`page_type` | a tag for the specific page, useful for tracking funnel flow | string | checkout-flow-page1
